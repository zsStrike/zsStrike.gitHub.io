---
title: 《Java并发编程实战》笔记
date: 2020-12-17 18:43:50
tags: ["Java"]
---

本文总结了《Java并发编程实战》中的关键点，可以用于查阅其中的知识点。

<!-- More -->

## 第二章 线程安全性

线程安全性：当多个类访问同一个类的时候，这个类始终都能表现出正确的行为，就称该线程是线程安全的。

原子性：

+ 竞态条件（Race Condition）：当某个计算的正确性取决于多个线程的交替执行时序时，那么就会发生竞态条件。比如懒汉式单例模式中的 getInstance 方法，基于先检查后执行，由于需要检查 instance 是否为 null，再判断是否需要实例化，此时就存在竞态条件。
+ 复合操作：指的是将一系列的操作合并成一个，使其满足原子性，比如 AtomicLong 里面的 incrementAndGet 方法。

加锁机制：

+ 内置锁：使用关键字 synchronized  实现同步锁，修饰方法的时候锁就是方法调用所在的对象，静态的 synchronized 方法以 Class 对象为锁。

  ```java
  synchronized (lock) {
  	// 访问或者修改由锁保护的共享对象
  }
  ```

+ 重入：当某个线程请求一个由其他线程持有的锁的时候，发出请求的线程会阻塞。但是如果一个线程试图获得一个已经由它自己持有的锁，那么这个请求就会成功。

